/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package nccs.omts.view;

import java.sql.SQLException;
import java.util.List;
import java.util.Scanner;
import nccs.omts.control.*;
import nccs.omts.repository.*;
import nccs.omts.model.*;

/**
 *
 * @author spectre
 */
public class Client {

    CustomerController customerController = new CustomerController();
    CartController cartController = new CartController();

    public void categories() throws SQLException {
       MoviesRepository moviesRepository = new MoviesRepository();

        List<Movies> categories = moviesrepository.getMovies();

        System.out.println("Movie ID : Movie Name");
        for (Movies movies : movies) {
            System.out.println(movies.getMovies_id() + "\t" + movies.getName());
        }

    }

    public void Products(int moviesId) throws SQLException {
       HallRepository hallRepository = new HallRepository();
        List<Hall> hall = hallRepository.gethallByMoviesId(moviesId);
        System.out.println("ID : Product");
        for (Hall hall : hall) {
            System.out.println(hall.toString());
        }
    }

    public void mainPage() throws SQLException {

        System.out.println("Welcome " + customerController.getCurrentUser().getFirstName());
        Scanner scanner = new Scanner(System.in);

        int moviesId;
        do {
            movies();
            System.out.println("Select a movie or 0 to exit :");

            moviesId = scanner.nextInt();
            if (moviesId == 0) {
                return;
            }

            Hall(moviesId);
            System.out.println("Select a hall to add to cart or 0 to cancel :");
            int hallId = scanner.nextInt();

            if (hallId != 0) {
                cartController.addToCart(hallId, customerController.getCurrentUser());
            }

        } while (true);
    }

    public boolean logIn() throws SQLException {

        Scanner scanner = new Scanner(System.in);
        System.out.println("Please login by your email: ");
        String email = scanner.next();
        return customerController.login(email);

    }
}
